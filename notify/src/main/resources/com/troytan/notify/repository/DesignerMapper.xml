<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.troytan.notify.repository.DesignerMapper">
	<resultMap id="BaseResultMap"
		type="com.troytan.notify.domain.Designer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="DESIGNER_ID" jdbcType="INTEGER" property="designerId" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="ORDER_NUM" jdbcType="INTEGER"
			property="orderNum" />
		<result column="PHOTO" jdbcType="VARCHAR" property="photo" />
		<result column="DESCRIPTION" jdbcType="VARCHAR"
			property="description" />
		<result column="PHOTO_DETAIL" jdbcType="VARCHAR"
			property="photoDetail" />
		<result column="CREATE_ON" jdbcType="TIMESTAMP"
			property="createOn" />
		<result column="CREATE_BY" jdbcType="VARCHAR"
			property="createBy" />
		<result column="UPDATE_ON" jdbcType="TIMESTAMP"
			property="updateOn" />
		<result column="UPDATE_BY" jdbcType="VARCHAR"
			property="updateBy" />
	</resultMap>
	<delete id="deleteByPrimaryKey"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from tt_designer
		where DESIGNER_ID = #{designerId,jdbcType=INTEGER}
	</delete>
	<insert id="insert"
		parameterType="com.troytan.notify.domain.Designer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<selectKey keyProperty="designerId" order="AFTER"
			resultType="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into tt_designer (NAME, ORDER_NUM, PHOTO,
		DESCRIPTION, PHOTO_DETAIL, CREATE_ON,
		CREATE_BY, UPDATE_ON, UPDATE_BY
		)
		values (#{name,jdbcType=VARCHAR}, #{orderNum,jdbcType=INTEGER},
		#{photo,jdbcType=VARCHAR},
		#{description,jdbcType=VARCHAR}, #{photoDetail,jdbcType=VARCHAR}, #{createOn,jdbcType=TIMESTAMP},
		#{createBy,jdbcType=VARCHAR}, #{updateOn,jdbcType=TIMESTAMP},
		#{updateBy,jdbcType=VARCHAR}
		)
	</insert>
	<update id="updateByPrimaryKey"
		parameterType="com.troytan.notify.domain.Designer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update tt_designer
		set NAME = #{name,jdbcType=VARCHAR},
		ORDER_NUM = #{orderNum,jdbcType=INTEGER},
		PHOTO = #{photo,jdbcType=VARCHAR},
		DESCRIPTION = #{description,jdbcType=VARCHAR},
		PHOTO_DETAIL = #{photoDetail,jdbcType=VARCHAR},
		CREATE_ON = #{createOn,jdbcType=TIMESTAMP},
		CREATE_BY = #{createBy,jdbcType=VARCHAR},
		UPDATE_ON = #{updateOn,jdbcType=TIMESTAMP},
		UPDATE_BY = #{updateBy,jdbcType=VARCHAR}
		where DESIGNER_ID = #{designerId,jdbcType=INTEGER}
	</update>
	<select id="selectByPrimaryKey"
		parameterType="java.lang.Integer" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select DESIGNER_ID, NAME, ORDER_NUM, PHOTO, DESCRIPTION, PHOTO_DETAIL,
		CREATE_ON,
		CREATE_BY, UPDATE_ON, UPDATE_BY
		from tt_designer
		where DESIGNER_ID = #{designerId,jdbcType=INTEGER}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select DESIGNER_ID, NAME, ORDER_NUM, PHOTO, DESCRIPTION, PHOTO_DETAIL,
		CREATE_ON,
		CREATE_BY, UPDATE_ON, UPDATE_BY
		from tt_designer
	</select>



	<resultMap id="DesignerDtoResultMap" type="com.troytan.notify.dto.DesignerDto">
		<id column="DESIGNER_ID" jdbcType="INTEGER" property="designerId" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="ORDER_NUM" jdbcType="INTEGER" property="orderNum" />
		<result column="PHOTO" jdbcType="VARCHAR" property="photo" />
		<result column="PHOTO_DETAIL" jdbcType="VARCHAR" property="photoDetail" />
        <collection ofType="com.troytan.notify.domain.Work" property="workList">
			<id column="WORK_ID" jdbcType="INTEGER" property="workId" />
            <result column="IMG_URL" jdbcType="VARCHAR" property="imgUrl" />
            <result column="IS_COVER" jdbcType="VARCHAR" property="isCover" />
		</collection>	 
	</resultMap>
		<select id="listByWork" resultMap="DesignerDtoResultMap">
			select designer.DESIGNER_ID, designer.NAME, designer.ORDER_NUM,
			designer.PHOTO, designer.PHOTO_DETAIL, work.work_id, work.img_url, work.is_cover 
			from tt_designer designer
			left join tt_work work on designer.designer_id = work.designer_id
		</select>
</mapper>